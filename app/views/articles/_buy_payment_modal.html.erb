<% identifier = SecureRandom.uuid %>

<div 
  data-controller="buy-article-payment" 
  data-buy-article-payment-article-uuid-value="<%= article.uuid %>"
  data-buy-article-payment-selected-currency-value="<%= article.currency.asset_id %>"
  data-buy-article-payment-identifier-value="<%= identifier %>"
  class="max-w-xs m-auto p-4">
  <%= button_to view_modals_path(type: :swappable_currencies, identifier: identifier), class: "block w-full mb-4 flex items-center justify-between py-2 px-4 bg-zinc-100 rounded-lg" do %>
    <div id="<%= dom_id article.currency %>" class="flex items-center space-x-4">
      <div class='relative'>
        <%= image_tag article.currency.icon_url, 
          data: { buy_article_payment_target: 'currencyIcon' }, 
          class: 'w-8 h-8 rounded-full' %>
        <%= image_tag article.currency.icon_url, 
          data: { buy_article_payment_target: 'currencyChainIcon' }, 
          class: 'absolute bottom-0 w-3 h-3 rounded-full' %>
      </div>
      <div class="text-lg" data-buy-article-payment-target="currencySymbol">
        <%= article.currency.symbol %>
      </div>
    </div>
    <%= render 'shared/icons/chevron_right', html_class: 'w-6 h-6 font-bold' %>
  <% end %>

  <template data-buy-article-payment-target="loading">
    <div class="flex justify-center">
      <img class="w-12 h-12 my-0" src="<%= image_path 'loading.svg' %>" />
    </div>
  </template>
  <div data-buy-article-payment-target="payBox" id="article_<%= article.uuid %>_buy_payment_box">
    <%= render partial: "articles/buy_payment_box", locals: { article: article, pay_asset_id: article.asset_id, currency_symbol: article.currency.symbol } %>
  </div>
</div>
