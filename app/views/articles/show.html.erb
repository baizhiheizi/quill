<div class="lg:grid lg:grid-cols-3 lg:gap-x-6">
  <article class="max-w-full lg:col-span-2 mb-4">
    <div class="bg-white dark:bg-zinc-900 dark:border-zinc-800 p-4 w-full sm:p-6 sm:border sm:rounded-lg mb-4">
      <div class="flex items-start justify-between mb-6">
        <div class="relative flex items-center space-x-2">
          <img class="w-10 h-10 my-0 rounded-full" src="<%= @article.author.avatar %>">
          <div class="leading-4">
            <span class="text-base font-semibold"><%= @article.author.name %></span>
            <div class="text-sm sm:text-base text-gray-500 font-light">
              <%= @article.published_at.strftime("%Y-%m-%d %H:%M") %>
            </div>
          </div>
          <%= link_to user_path(@article.author) do %>
            <span aria-hidden="true" class="absolute inset-0"></span>
          <% end %>
        </div>
        <div class="flex justify-end">
          <%= render "articles/share_button", article: @article, button_class: "w-5 h-5 lg:w-6 lg:h-6" %>
        </div>
      </div>
      <div class="font-semibold text-xl lg:text-3xl 3xl:text-4xl mb-6">
        <%= @article.title %>
      </div>
      <div class="py-2 px-4 mb-8 bg-zinc-100 dark:bg-zinc-800 rounded">
        <%= @article.intro %>
      </div>
      <div class="flex items-center space-x-2 mb-4 text-sm xl:text-base text-gray-500">
        <span>
          <%= t("article.words_count") %>:
        </span>
        <span>
          <%= @article.words_count %>
        </span>
      </div>

      <div class="mb-8">
        <%= render partial: "articles/content", locals: { article: @article, user: current_user } %>
      </div>

      <div id="article_<%= @article.uuid %>_buyers" class="mb-8">
        <%= render partial: "articles/buyers", locals: { article: @article, user: current_user } %>
      </div>
    </div>

    <div class="bg-white dark:bg-zinc-900 dark:border-zinc-800 p-4 w-full sm:p-6 sm:border sm:rounded-lg mb-4">
      <div class="text-center mb-4 font-bold text-lg opacity-70">
        <%= t('comments') %>
      </div>
      <div data-controller="comment-form">
        <% if @article.authorized? current_user %>
          <div class="mb-4 flex justify-center">
            <%= render partial: "subscribe_articles/subscribe_button", locals: { article: @article } %>
          </div>
          <%= render partial: "comments/form", locals: { commentable: @article } %>
        <% end %>
        <%= turbo_frame_tag "#{dom_id @article}_comments", src: article_comments_path(@article.uuid) do %>
          <%= render "shared/loading" %>
        <% end %>
      </div>
    </div>
  </article>

  <aside class="lg:col-span-1">
    <div class="lg:sticky lg:top-20">
      <div class="mb-4">
        <%= render partial: "articles/author_card", locals: { author: @article.author } %>
      </div>
      <% if @article.article_references.present? %>
        <div class="mb-4">
          <%= render partial: "articles/references_card", locals: { references: @article.article_references } %>
        </div>
      <% end %>
      <% if @article.related_articles.present? %>
        <div class="mb-4">
          <%= render partial: "articles/related_articles_card", locals: { articles: @article.related_articles } %>
        </div>
      <% end %>
      <div class="mb-4">
        <%= render "shared/hot_tags_card" %>
      </div>
    </div>
  <aside>
</div>
