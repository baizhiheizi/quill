<% identifier = SecureRandom.uuid %>

<div 
  data-controller="reward-article-payment" 
  data-reward-article-payment-trace-id-value="<%= trace_id %>"
  data-reward-article-payment-identifier-value="<%= identifier %>"
  data-reward-article-payment-article-uuid-value="<%= article.uuid %>"
  data-reward-article-payment-selected-currency-value="<%= article.currency.asset_id %>"
  data-reward-article-payment-minimal-reward-amount-value="<%= article.currency.minimal_reward_amount %>"
  data-reward-article-payment-selected-amount-share-value="1"
  class="max-w-xs m-auto p-4">
  <div class="mb-4 grid grid-cols-3 gap-4">
    <% [1, 4, 8, 32, 256, 1024].each do |number| %>
      <div 
        data-reward-article-payment-target="amountShare"
        data-amount-share="<%= number %>"
        data-action="click->reward-article-payment#selectAmountShare"
        class="cursor-pointer flex items-center space-x-2 justify-center border p-1">
        <span class="text-sm sm:text-base"><%= format('%.8f', article.currency.minimal_reward_amount * number).gsub(/0+\z/, '') %></span>
      </div>
    <% end %>
  </div>

  <%= button_to view_modals_path(type: :swappable_currencies, identifier: identifier), 
    class: "block w-full mb-4 flex items-center justify-between py-2 px-4 bg-zinc-100 rounded-lg" do %>
    <div id="<%= dom_id article.currency %>" class="flex items-center space-x-4">
      <div class='relative'>
        <%= image_tag article.currency.icon_url, 
          data: { reward_article_payment_target: 'currencyIcon' }, 
          class: 'w-8 h-8 rounded-full' %>
        <%= image_tag article.currency.icon_url, 
          data: { reward_article_payment_target: 'currencyChainIcon' }, 
          class: 'absolute bottom-0 w-3 h-3 rounded-full' %>
      </div>
      <div class="text-lg" data-reward-article-payment-target="currencySymbol">
        <%= article.currency.symbol %>
      </div>
    </div>
    <%= render 'shared/icons/chevron_right', html_class: 'w-6 h-6 font-bold' %>
  <% end %>

  <div class="flex items-center justify-center space-x-2 font-bold">
    <span data-reward-article-payment-target="amount">
      <%= format('%.8f', article.currency.minimal_reward_amount).gsub(/0+\z/, '') %>
    </span>
    <span data-reward-article-payment-target="currencySymbol">
      <%= article.currency.symbol %>
    </span>
  </div>
  <template data-reward-article-payment-target="loading">
    <div class="flex justify-center">
      <img class="w-12 h-12 my-0" src="<%= image_path 'loading.svg' %>" />
    </div>
  </template>
  <div data-reward-article-payment-target="payBox" id="article_<%= article.uuid %>_reward_payment_box">
  </div>
</div>
